{"remainingRequest":"E:\\hz\\project\\software-project\\vue-admin-template\\node_modules\\babel-loader\\lib\\index.js!E:\\hz\\project\\software-project\\vue-admin-template\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\hz\\project\\software-project\\vue-admin-template\\src\\store\\modules\\user.js","dependencies":[{"path":"E:\\hz\\project\\software-project\\vue-admin-template\\src\\store\\modules\\user.js","mtime":1716303390800},{"path":"E:\\hz\\project\\software-project\\vue-admin-template\\babel.config.js","mtime":1711128134432},{"path":"E:\\hz\\project\\software-project\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1711128216744},{"path":"E:\\hz\\project\\software-project\\vue-admin-template\\node_modules\\babel-loader\\lib\\index.js","mtime":1711128218699},{"path":"E:\\hz\\project\\software-project\\vue-admin-template\\node_modules\\eslint-loader\\index.js","mtime":1711128217161}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbS5qcyI7Ci8vIOivt+axguWPkemAgeeahOWumuS5ieWcqOi/memHjAovLyDlrp7pmYXmmK/pgJrov4cgdnVleCDov5vljrvlj5HpgIHnmoQKaW1wb3J0IHsgbG9naW4gYXMgX2xvZ2luLCBsb2dvdXQgYXMgX2xvZ291dCwgZ2V0SW5mbyBhcyBfZ2V0SW5mbyB9IGZyb20gJ0AvYXBpL3VzZXInOwppbXBvcnQgeyBnZXRUb2tlbiwgc2V0VG9rZW4sIHJlbW92ZVRva2VuIH0gZnJvbSAnQC91dGlscy9hdXRoJzsKaW1wb3J0IHsgcmVzZXRSb3V0ZXIgfSBmcm9tICdAL3JvdXRlcic7CnZhciBnZXREZWZhdWx0U3RhdGUgPSBmdW5jdGlvbiBnZXREZWZhdWx0U3RhdGUoKSB7CiAgcmV0dXJuIHsKICAgIHRva2VuOiBnZXRUb2tlbigpLAogICAgbmFtZTogJycsCiAgICBhdmF0YXI6ICcnLAogICAgcm9sZTogJycKICB9Owp9Owp2YXIgc3RhdGUgPSBnZXREZWZhdWx0U3RhdGUoKTsKdmFyIG11dGF0aW9ucyA9IHsKICBSRVNFVF9TVEFURTogZnVuY3Rpb24gUkVTRVRfU1RBVEUoc3RhdGUpIHsKICAgIE9iamVjdC5hc3NpZ24oc3RhdGUsIGdldERlZmF1bHRTdGF0ZSgpKTsKICB9LAogIFNFVF9UT0tFTjogZnVuY3Rpb24gU0VUX1RPS0VOKHN0YXRlLCB0b2tlbikgewogICAgc3RhdGUudG9rZW4gPSB0b2tlbjsKICB9LAogIFNFVF9OQU1FOiBmdW5jdGlvbiBTRVRfTkFNRShzdGF0ZSwgbmFtZSkgewogICAgc3RhdGUubmFtZSA9IG5hbWU7CiAgfSwKICBTRVRfQVZBVEFSOiBmdW5jdGlvbiBTRVRfQVZBVEFSKHN0YXRlLCBhdmF0YXIpIHsKICAgIHN0YXRlLmF2YXRhciA9IGF2YXRhcjsKICB9LAogIFNFVF9ST0xFOiBmdW5jdGlvbiBTRVRfUk9MRShzdGF0ZSwgcm9sZSkgewogICAgc3RhdGUucm9sZSA9IHJvbGU7CiAgfQp9OwoKLy8g5byC5q2l6K+35rGC77yM5b2x5ZON54q25oCBCnZhciBhY3Rpb25zID0gewogIC8vIHVzZXIgbG9naW4KICAvLyDov5jmmK/osIPnlKjkuoYgYXBpL3VzZXIg5LiL6Z2i55qEIGxvZ2luIOWHveaVsOWPkemAgeivt+axggogIC8vIOaOpeaUtuWTjeW6lOaVsOaNruWQju+8jOmAmui/hyBjb21taXQg5pS55Y+YIHN0YXRlCiAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKF9yZWYsIHVzZXJJbmZvKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgICB2YXIgdXNlcm5hbWUgPSB1c2VySW5mby51c2VybmFtZSwKICAgICAgcGFzc3dvcmQgPSB1c2VySW5mby5wYXNzd29yZDsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIF9sb2dpbih7CiAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLnRyaW0oKSwKICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICB2YXIgZGF0YSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgY29tbWl0KCdTRVRfVE9LRU4nLCBkYXRhLnRva2VuKTsKICAgICAgICBzZXRUb2tlbihkYXRhLnRva2VuKTsKICAgICAgICByZXNvbHZlKCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICAvLyBnZXQgdXNlciBpbmZvCiAgZ2V0SW5mbzogZnVuY3Rpb24gZ2V0SW5mbyhfcmVmMikgewogICAgdmFyIGNvbW1pdCA9IF9yZWYyLmNvbW1pdCwKICAgICAgc3RhdGUgPSBfcmVmMi5zdGF0ZTsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIF9nZXRJbmZvKHN0YXRlLnRva2VuKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHZhciBkYXRhID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICBpZiAoIWRhdGEpIHsKICAgICAgICAgIHJldHVybiByZWplY3QoJ1ZlcmlmaWNhdGlvbiBmYWlsZWQsIHBsZWFzZSBMb2dpbiBhZ2Fpbi4nKTsKICAgICAgICB9CiAgICAgICAgY29tbWl0KCdTRVRfTkFNRScsIGRhdGEubmFtZSk7CiAgICAgICAgY29tbWl0KCdTRVRfQVZBVEFSJywgZGF0YS5hdmF0YXIpOwogICAgICAgIGNvbW1pdCgnU0VUX1JPTEUnLCBkYXRhLnJvbGUpOwogICAgICAgIHJlc29sdmUoZGF0YSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICAvLyB1c2VyIGxvZ291dAogIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KF9yZWYzKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjMuY29tbWl0LAogICAgICBzdGF0ZSA9IF9yZWYzLnN0YXRlOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgX2xvZ291dChzdGF0ZS50b2tlbikudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgcmVtb3ZlVG9rZW4oKTsgLy8gbXVzdCByZW1vdmUgIHRva2VuICBmaXJzdAogICAgICAgIHJlc2V0Um91dGVyKCk7CiAgICAgICAgY29tbWl0KCdSRVNFVF9TVEFURScpOwogICAgICAgIHJlc29sdmUoKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgfSk7CiAgICB9KTsKICB9LAogIC8vIHJlbW92ZSB0b2tlbgogIHJlc2V0VG9rZW46IGZ1bmN0aW9uIHJlc2V0VG9rZW4oX3JlZjQpIHsKICAgIHZhciBjb21taXQgPSBfcmVmNC5jb21taXQ7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgcmVtb3ZlVG9rZW4oKTsgLy8gbXVzdCByZW1vdmUgIHRva2VuICBmaXJzdAogICAgICBjb21taXQoJ1JFU0VUX1NUQVRFJyk7CiAgICAgIHJlc29sdmUoKTsKICAgIH0pOwogIH0KfTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6IHN0YXRlLAogIG11dGF0aW9uczogbXV0YXRpb25zLAogIGFjdGlvbnM6IGFjdGlvbnMKfTs="},{"version":3,"names":["login","logout","getInfo","getToken","setToken","removeToken","resetRouter","getDefaultState","token","name","avatar","role","state","mutations","RESET_STATE","Object","assign","SET_TOKEN","SET_NAME","SET_AVATAR","SET_ROLE","actions","_ref","userInfo","commit","username","password","Promise","resolve","reject","trim","then","response","data","catch","error","_ref2","_ref3","resetToken","_ref4","namespaced"],"sources":["E:/hz/project/software-project/vue-admin-template/src/store/modules/user.js"],"sourcesContent":["// 请求发送的定义在这里\r\n// 实际是通过 vuex 进去发送的\r\nimport { login, logout, getInfo } from '@/api/user'\r\nimport { getToken, setToken, removeToken } from '@/utils/auth'\r\nimport { resetRouter } from '@/router'\r\n\r\nconst getDefaultState = () => {\r\n    return {\r\n        token: getToken(),\r\n        name: '',\r\n        avatar: '',\r\n        role: ''\r\n    }\r\n}\r\n\r\nconst state = getDefaultState()\r\n\r\nconst mutations = {\r\n    RESET_STATE: (state) => {\r\n        Object.assign(state, getDefaultState())\r\n    },\r\n    SET_TOKEN: (state, token) => {\r\n        state.token = token\r\n    },\r\n    SET_NAME: (state, name) => {\r\n        state.name = name\r\n    },\r\n    SET_AVATAR: (state, avatar) => {\r\n        state.avatar = avatar\r\n    },\r\n    SET_ROLE: (state, role) => {\r\n        state.role = role\r\n    }\r\n}\r\n\r\n// 异步请求，影响状态\r\nconst actions = {\r\n    // user login\r\n    // 还是调用了 api/user 下面的 login 函数发送请求\r\n    // 接收响应数据后，通过 commit 改变 state\r\n    login({ commit }, userInfo) {\r\n        const { username, password } = userInfo\r\n        return new Promise((resolve, reject) => {\r\n            login({ username: username.trim(), password: password }).then(response => {\r\n                const { data } = response\r\n                commit('SET_TOKEN', data.token)\r\n                setToken(data.token)\r\n                resolve()\r\n            }).catch(error => {\r\n                reject(error)\r\n            })\r\n        })\r\n    },\r\n\r\n    // get user info\r\n    getInfo({ commit, state }) {\r\n        return new Promise((resolve, reject) => {\r\n            getInfo(state.token).then(response => {\r\n                const { data } = response\r\n\r\n                if (!data) {\r\n                    return reject('Verification failed, please Login again.')\r\n                }\r\n\r\n                commit('SET_NAME', data.name)\r\n                commit('SET_AVATAR', data.avatar)\r\n                commit('SET_ROLE', data.role)\r\n                resolve(data)\r\n            }).catch(error => {\r\n                reject(error)\r\n            })\r\n        })\r\n    },\r\n\r\n    // user logout\r\n    logout({ commit, state }) {\r\n        return new Promise((resolve, reject) => {\r\n            logout(state.token).then(() => {\r\n                removeToken() // must remove  token  first\r\n                resetRouter()\r\n                commit('RESET_STATE')\r\n                resolve()\r\n            }).catch(error => {\r\n                reject(error)\r\n            })\r\n        })\r\n    },\r\n\r\n    // remove token\r\n    resetToken({ commit }) {\r\n        return new Promise(resolve => {\r\n            removeToken() // must remove  token  first\r\n            commit('RESET_STATE')\r\n            resolve()\r\n        })\r\n    }\r\n}\r\n\r\nexport default {\r\n    namespaced: true,\r\n    state,\r\n    mutations,\r\n    actions\r\n}\r\n\r\n"],"mappings":"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","ignoreList":[]}]}